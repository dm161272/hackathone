<!DOCTYPE html>
<html>
    <head>
       <link rel="stylesheet" href="styles.css">
    </head>
    <script>
        plot = (data)=>{ 
            thead = document.querySelector(".fl-table\ thead\ tr"); 
            heads = data[0];
            heads = Object.keys(heads);
            heads.forEach(element => {
                thead.innerHTML +=  "<th>" + element + "</th>";  
            });
            let tbody = document.querySelector(".fl-table\ tbody");
            Object.keys(data).forEach(key => {
                    element = data[key]
                    rowTag = document.createElement("tr");
                    Object.keys(element).forEach( col => {
                        rowTag.innerHTML += "<td>" + element[col] + "</td>";
                    });
                    tbody.appendChild(rowTag);
            });
        };
    
        document.addEventListener("DOMContentLoaded", function(){
            addr = 'localhost';
            fetch('http://'+ addr + ':8000/api/barris')
            .then((response) => response.json())
            .then((data) =>{
                plot(data);
                console.log(data);
            });
        });

    </script>
    <body>
        <div class="table-wrapper">
            <table class="fl-table">
                <thead>
                    <tr></tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </body>
</html>